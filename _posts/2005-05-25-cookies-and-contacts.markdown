--- 
layout: post
title: Cookies and Contacts
wordpress_id: 27
wordpress_url: http://lukebaker.org/archives/2005/05/25/cookies-and-contacts/
date: 2005-05-25 14:24:43 -04:00
---
As everybody and their mom has been talking about <a href="http://greasemonkey.mozdev.org/">Greasemonkey</a> and <a title="Ajax" href="http://www.adaptivepath.com/publications/essays/archives/000385.php">AJAX</a>, I decided I had better get a piece of the action. I also had a growing annoyance with the state of MUAs. I was contemplating writing my own, however I've since realized that perhaps I can get what I want by using Greasemonkey to add features to Gmail. <a href="http://lukebaker.org/archives/2005/05/25/persistent-persistent-searches/">Persistent Persistent Searches</a> is that first step. The bit of code that I wrote allows people to write Greasemonkey scripts that store data in a Gmail contact. I wanted it to be relatively secure, "nice" to Gmail's servers, and easy to use. What I ended up with is something that stores data in the note field of a particular contact. The data resembles cookie data and can be used in a very similar fashion. In fact the note data is cached in a cookie. This is my attempt to be nice to Gmail's servers. On initial login, the note data is downloaded from the contact and stored in a cookie. Any read attempts for note data actually just read the local cookie. Any write attempts change the data in the local cookie and on Gmail's servers. Since this data is cached in a cookie, I was a little concerned with the expiration time of this cookie (so that other users on the same computer couldn't see the cookie data). The pseudo-solution was that this cache cookie expires after 3 minutes. However, Gmail checks for new mail every 2 minutes. Each time this happens (and the same user is logged in), the cache cookie will be given another 3 minutes to live. In other words, this cache cookie will be around after the user logs out of Gmail for at most 3 minutes.
